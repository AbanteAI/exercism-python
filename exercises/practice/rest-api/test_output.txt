============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-7.4.0, pluggy-1.3.0
rootdir: /home/jake/Development/mentat/tests/benchmarks/repos/exercism-python
configfile: pytest.ini
plugins: mock-3.11.1, reportlog-0.4.0, asyncio-0.21.1, xdist-3.3.1
asyncio: mode=strict
collected 9 items

exercises/practice/rest-api/rest_api_test.py .....FFF.                   [100%]

=================================== FAILURES ===================================
____________________ RestApiTest.test_lender_owes_borrower _____________________

self = <rest_api_test.RestApiTest testMethod=test_lender_owes_borrower>

    def test_lender_owes_borrower(self):
        database = {
            "users": [
                {"name": "Adam", "owes": {"Bob": 3.0}, "owed_by": {}, "balance": -3.0},
                {"name": "Bob", "owes": {}, "owed_by": {"Adam": 3.0}, "balance": 3.0},
            ]
        }
        api = RestAPI(database)
        payload = json.dumps({"lender": "Adam", "borrower": "Bob", "amount": 2.0})
        response = api.post("/iou", payload)
        expected = {
            "users": [
                {"name": "Adam", "owes": {"Bob": 1.0}, "owed_by": {}, "balance": -1.0},
                {"name": "Bob", "owes": {}, "owed_by": {"Adam": 1.0}, "balance": 1.0},
            ]
        }
>       self.assertDictEqual(json.loads(response), expected)
E       AssertionError: {'use[34 chars]ob': 3.0}, 'owed_by': {'Bob': 2.0}, 'balance':[85 chars].0}]} != {'use[34 chars]ob': 1.0}, 'owed_by': {}, 'balance': -1.0}, {'[64 chars].0}]}
E         {'users': [{'balance': -1.0,
E                     'name': 'Adam',
E       -             'owed_by': {'Bob': 2.0},
E       ?                         ----------
E       
E       +             'owed_by': {},
E       -             'owes': {'Bob': 3.0}},
E       ?                             ^
E       
E       +             'owes': {'Bob': 1.0}},
E       ?                             ^
E       
E                    {'balance': 1.0,
E                     'name': 'Bob',
E       -             'owed_by': {'Adam': 3.0},
E       ?                                 ^
E       
E       +             'owed_by': {'Adam': 1.0},
E       ?                                 ^
E       
E       -             'owes': {'Adam': 2.0}}]}
E       ?                      -----------
E       
E       +             'owes': {}}]}

exercises/practice/rest-api/rest_api_test.py:127: AssertionError
___________ RestApiTest.test_lender_owes_borrower_less_than_new_loan ___________

self = <rest_api_test.RestApiTest testMethod=test_lender_owes_borrower_less_than_new_loan>

    def test_lender_owes_borrower_less_than_new_loan(self):
        database = {
            "users": [
                {"name": "Adam", "owes": {"Bob": 3.0}, "owed_by": {}, "balance": -3.0},
                {"name": "Bob", "owes": {}, "owed_by": {"Adam": 3.0}, "balance": 3.0},
            ]
        }
        api = RestAPI(database)
        payload = json.dumps({"lender": "Adam", "borrower": "Bob", "amount": 4.0})
        response = api.post("/iou", payload)
        expected = {
            "users": [
                {"name": "Adam", "owes": {}, "owed_by": {"Bob": 1.0}, "balance": 1.0},
                {"name": "Bob", "owes": {"Adam": 1.0}, "owed_by": {}, "balance": -1.0},
            ]
        }
>       self.assertDictEqual(json.loads(response), expected)
E       AssertionError: {'use[27 chars]s': {'Bob': 3.0}, 'owed_by': {'Bob': 4.0}, 'ba[92 chars].0}]} != {'use[27 chars]s': {}, 'owed_by': {'Bob': 1.0}, 'balance': 1.[71 chars].0}]}
E         {'users': [{'balance': 1.0,
E                     'name': 'Adam',
E       -             'owed_by': {'Bob': 4.0},
E       ?                                ^
E       
E       +             'owed_by': {'Bob': 1.0},
E       ?                                ^
E       
E       -             'owes': {'Bob': 3.0}},
E       ?                      ----------
E       
E       +             'owes': {}},
E                    {'balance': -1.0,
E                     'name': 'Bob',
E       -             'owed_by': {'Adam': 3.0},
E       ?                         -----------
E       
E       +             'owed_by': {},
E       -             'owes': {'Adam': 4.0}}]}
E       ?                              ^
E       
E       +             'owes': {'Adam': 1.0}}]}
E       ?                              ^

exercises/practice/rest-api/rest_api_test.py:145: AssertionError
____________ RestApiTest.test_lender_owes_borrower_same_as_new_loan ____________

self = <rest_api_test.RestApiTest testMethod=test_lender_owes_borrower_same_as_new_loan>

    def test_lender_owes_borrower_same_as_new_loan(self):
        database = {
            "users": [
                {"name": "Adam", "owes": {"Bob": 3.0}, "owed_by": {}, "balance": -3.0},
                {"name": "Bob", "owes": {}, "owed_by": {"Adam": 3.0}, "balance": 3.0},
            ]
        }
        api = RestAPI(database)
        payload = json.dumps({"lender": "Adam", "borrower": "Bob", "amount": 3.0})
        response = api.post("/iou", payload)
        expected = {
            "users": [
                {"name": "Adam", "owes": {}, "owed_by": {}, "balance": 0.0},
                {"name": "Bob", "owes": {}, "owed_by": {}, "balance": 0.0},
            ]
        }
>       self.assertDictEqual(json.loads(response), expected)
E       AssertionError: {'use[27 chars]s': {'Bob': 3.0}, 'owed_by': {'Bob': 3.0}, 'ba[91 chars].0}]} != {'use[27 chars]s': {}, 'owed_by': {}, 'balance': 0.0}, {'name[49 chars].0}]}
E       + {'users': [{'balance': 0.0, 'name': 'Adam', 'owed_by': {}, 'owes': {}},
E       +            {'balance': 0.0, 'name': 'Bob', 'owed_by': {}, 'owes': {}}]}
E       - {'users': [{'balance': 0.0,
E       -             'name': 'Adam',
E       -             'owed_by': {'Bob': 3.0},
E       -             'owes': {'Bob': 3.0}},
E       -            {'balance': 0.0,
E       -             'name': 'Bob',
E       -             'owed_by': {'Adam': 3.0},
E       -             'owes': {'Adam': 3.0}}]}

exercises/practice/rest-api/rest_api_test.py:163: AssertionError
=========================== short test summary info ============================
FAILED exercises/practice/rest-api/rest_api_test.py::RestApiTest::test_lender_owes_borrower
FAILED exercises/practice/rest-api/rest_api_test.py::RestApiTest::test_lender_owes_borrower_less_than_new_loan
FAILED exercises/practice/rest-api/rest_api_test.py::RestApiTest::test_lender_owes_borrower_same_as_new_loan
========================= 3 failed, 6 passed in 0.05s ==========================
